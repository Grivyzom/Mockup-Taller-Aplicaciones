<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registro - Cosmofood</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#ff6b35',
                        secondary: '#2c3e50',
                        accent: '#f39c12',
                        success: '#27ae60',
                        danger: '#e74c3c'
                    }
                }
            }
        }
    </script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .register-container {
            backdrop-filter: blur(10px);
            background: rgba(255, 255, 255, 0.95);
        }
        .form-control:focus {
            border-color: #ff6b35;
            box-shadow: 0 0 0 0.2rem rgba(255, 107, 53, 0.25);
        }
        .btn-primary {
            background: linear-gradient(45deg, #ff6b35, #f39c12);
            border: none;
        }
        .btn-primary:hover {
            background: linear-gradient(45deg, #e55a2e, #d68910);
            transform: translateY(-2px);
        }
        .password-strength {
            height: 4px;
            transition: all 0.3s ease;
        }
        .password-weak { background: #e74c3c; }
        .password-medium { background: #f39c12; }
        .password-strong { background: #27ae60; }
    </style>
</head>
<body class="d-flex align-items-center justify-content-center min-vh-100 py-5">
    <!-- Background decoration -->
    <div class="position-absolute top-0 start-0 w-100 h-100 overflow-hidden" style="z-index: -1;">
        <div class="position-absolute top-0 start-0 w-25 h-25 bg-white/10 rounded-full" style="transform: translate(-50%, -50%);"></div>
        <div class="position-absolute bottom-0 end-0 w-32 h-32 bg-white/5 rounded-full" style="transform: translate(50%, 50%);"></div>
    </div>

    <div class="container">
        <div class="row justify-content-center">
            <div class="col-md-8 col-lg-6">
                <div class="register-container card border-0 shadow-lg rounded-4 p-4">
                    <div class="card-body p-4">
                        <!-- Header -->
                        <div class="text-center mb-4">
                            <div class="bg-gradient-to-br from-orange-400 to-amber-500 w-20 h-20 rounded-full d-flex align-items-center justify-content-center mx-auto mb-3">
                                <i class="fas fa-utensils text-white text-2xl"></i>
                            </div>
                            <h2 class="h3 fw-bold text-dark mb-2">Únete a Cosmofood</h2>
                            <p class="text-muted mb-0">Crea tu cuenta y disfruta de nuestros servicios</p>
                        </div>

                        <!-- Registration Form -->
                        <form id="registerForm" class="needs-validation" novalidate>
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="firstName" class="form-label fw-semibold">
                                        <i class="fas fa-user text-primary me-2"></i>
                                        Nombre
                                    </label>
                                    <input 
                                        type="text" 
                                        class="form-control" 
                                        id="firstName" 
                                        placeholder="Tu nombre"
                                        required
                                        pattern="[A-Za-zÁÉÍÓÚáéíóúñÑ\s]{2,}"
                                    >
                                    <div class="invalid-feedback">
                                        El nombre debe tener al menos 2 caracteres.
                                    </div>
                                </div>

                                <div class="col-md-6 mb-3">
                                    <label for="lastName" class="form-label fw-semibold">
                                        <i class="fas fa-user text-primary me-2"></i>
                                        Apellido
                                    </label>
                                    <input 
                                        type="text" 
                                        class="form-control" 
                                        id="lastName" 
                                        placeholder="Tu apellido"
                                        required
                                        pattern="[A-Za-zÁÉÍÓÚáéíóúñÑ\s]{2,}"
                                    >
                                    <div class="invalid-feedback">
                                        El apellido debe tener al menos 2 caracteres.
                                    </div>
                                </div>
                            </div>

                            <div class="mb-3">
                                <label for="email" class="form-label fw-semibold">
                                    <i class="fas fa-envelope text-primary me-2"></i>
                                    Correo Electrónico
                                </label>
                                <input 
                                    type="email" 
                                    class="form-control" 
                                    id="email" 
                                    placeholder="tu@email.com"
                                    required
                                >
                                <div class="invalid-feedback">
                                    Por favor ingresa un correo válido.
                                </div>
                                <div class="valid-feedback">
                                    ¡Correo disponible!
                                </div>
                            </div>

                            <div class="mb-3">
                                <label for="phone" class="form-label fw-semibold">
                                    <i class="fas fa-phone text-primary me-2"></i>
                                    Teléfono
                                </label>
                                <input 
                                    type="tel" 
                                    class="form-control" 
                                    id="phone" 
                                    placeholder="+56 9 1234 5678"
                                    required
                                    pattern="[+]?[0-9\s\-\(\)]{8,15}"
                                >
                                <div class="invalid-feedback">
                                    Ingresa un número de teléfono válido.
                                </div>
                            </div>

                            <div class="mb-3">
                                <label for="address" class="form-label fw-semibold">
                                    <i class="fas fa-map-marker-alt text-primary me-2"></i>
                                    Dirección
                                </label>
                                <input 
                                    type="text" 
                                    class="form-control" 
                                    id="address" 
                                    placeholder="Tu dirección completa"
                                    required
                                    minlength="10"
                                >
                                <div class="invalid-feedback">
                                    La dirección debe tener al menos 10 caracteres.
                                </div>
                                <small class="text-muted">
                                    <i class="fas fa-info-circle me-1"></i>
                                    Necesaria para entregas a domicilio
                                </small>
                            </div>

                            <div class="mb-3">
                                <label for="password" class="form-label fw-semibold">
                                    <i class="fas fa-lock text-primary me-2"></i>
                                    Contraseña
                                </label>
                                <div class="input-group">
                                    <input 
                                        type="password" 
                                        class="form-control" 
                                        id="password"
                                        placeholder="Mínimo 8 caracteres"
                                        required
                                        minlength="8"
                                    >
                                    <button 
                                        class="btn btn-outline-secondary" 
                                        type="button" 
                                        id="togglePassword"
                                    >
                                        <i class="fas fa-eye" id="toggleIcon"></i>
                                    </button>
                                </div>
                                <div class="invalid-feedback">
                                    La contraseña debe tener al menos 8 caracteres, una mayúscula y un número.
                                </div>
                                
                                <!-- Password strength indicator -->
                                <div class="mt-2">
                                    <div class="password-strength rounded" id="passwordStrength"></div>
                                    <small class="text-muted" id="passwordStrengthText">
                                        Debe incluir: mayúscula, minúscula, número
                                    </small>
                                </div>
                            </div>

                            <div class="mb-3">
                                <label for="confirmPassword" class="form-label fw-semibold">
                                    <i class="fas fa-lock text-primary me-2"></i>
                                    Confirmar Contraseña
                                </label>
                                <input 
                                    type="password" 
                                    class="form-control" 
                                    id="confirmPassword"
                                    placeholder="Repite tu contraseña"
                                    required
                                >
                                <div class="invalid-feedback">
                                    Las contraseñas no coinciden.
                                </div>
                            </div>

                            <!-- Terms and conditions -->
                            <div class="mb-4">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="terms" required>
                                    <label class="form-check-label" for="terms">
                                        Acepto los 
                                        <a href="#" class="text-primary" data-bs-toggle="modal" data-bs-target="#termsModal">
                                            Términos y Condiciones
                                        </a> 
                                        y la 
                                        <a href="#" class="text-primary" data-bs-toggle="modal" data-bs-target="#privacyModal">
                                            Política de Privacidad
                                        </a>
                                    </label>
                                    <div class="invalid-feedback">
                                        Debes aceptar los términos y condiciones.
                                    </div>
                                </div>

                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="newsletter">
                                    <label class="form-check-label" for="newsletter">
                                        Quiero recibir ofertas y novedades por email
                                    </label>
                                </div>
                            </div>

                            <button 
                                type="submit" 
                                class="btn btn-primary btn-lg w-100 mb-3 transition-all duration-300"
                                id="registerBtn"
                            >
                                <i class="fas fa-user-plus me-2"></i>
                                Crear Cuenta
                            </button>
                        </form>

                        <!-- Login link -->
                        <div class="text-center">
                            <p class="text-muted mb-0">
                                ¿Ya tienes cuenta? 
                                <a href="login.html" class="text-primary fw-semibold text-decoration-none">
                                    Inicia sesión aquí
                                </a>
                            </p>
                        </div>

                        <!-- Back to home -->
                        <div class="text-center mt-4">
                            <a href="../../index.html" class="text-muted text-decoration-none">
                                <i class="fas fa-arrow-left me-2"></i>
                                Volver al inicio
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Terms Modal -->
    <div class="modal fade" id="termsModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header border-0">
                    <h5 class="modal-title">
                        <i class="fas fa-file-contract text-primary me-2"></i>
                        Términos y Condiciones
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-4">
                        <h6>1. Aceptación de Términos</h6>
                        <p class="text-muted small">Al usar los servicios de Cosmofood, aceptas estos términos y condiciones en su totalidad.</p>
                    </div>
                    <div class="mb-4">
                        <h6>2. Uso del Servicio</h6>
                        <p class="text-muted small">El servicio está destinado para uso personal y no comercial. Te comprometes a usar la plataforma de manera responsable.</p>
                    </div>
                    <div class="mb-4">
                        <h6>3. Política de Pedidos</h6>
                        <p class="text-muted small">Los pedidos están sujetos a disponibilidad. Nos reservamos el derecho de cancelar pedidos en casos excepcionales.</p>
                    </div>
                    <div class="mb-4">
                        <h6>4. Privacidad</h6>
                        <p class="text-muted small">Protegemos tu información personal según nuestra política de privacidad.</p>
                    </div>
                    <div class="alert alert-info">
                        <small><strong>Nota:</strong> Este es un mockup educativo. Los términos mostrados son solo para demostración.</small>
                    </div>
                </div>
                <div class="modal-footer border-0">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                    <button type="button" class="btn btn-primary" data-bs-dismiss="modal" onclick="acceptTerms()">Aceptar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Privacy Modal -->
    <div class="modal fade" id="privacyModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header border-0">
                    <h5 class="modal-title">
                        <i class="fas fa-shield-alt text-primary me-2"></i>
                        Política de Privacidad
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-4">
                        <h6>Información que Recopilamos</h6>
                        <p class="text-muted small">Recopilamos información necesaria para brindarte un mejor servicio: nombre, email, teléfono y dirección de entrega.</p>
                    </div>
                    <div class="mb-4">
                        <h6>Uso de la Información</h6>
                        <p class="text-muted small">Usamos tu información para procesar pedidos, mejorar nuestros servicios y comunicarnos contigo.</p>
                    </div>
                    <div class="mb-4">
                        <h6>Protección de Datos</h6>
                        <p class="text-muted small">Implementamos medidas de seguridad para proteger tu información personal.</p>
                    </div>
                    <div class="mb-4">
                        <h6>Derechos del Usuario</h6>
                        <p class="text-muted small">Tienes derecho a acceder, modificar o eliminar tu información personal en cualquier momento.</p>
                    </div>
                    <div class="alert alert-info">
                        <small><strong>Nota:</strong> Este es un mockup educativo. La política mostrada es solo para demostración.</small>
                    </div>
                </div>
                <div class="modal-footer border-0">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Success Toast -->
    <div class="toast-container position-fixed top-0 end-0 p-3">
        <div id="successToast" class="toast" role="alert">
            <div class="toast-header bg-success text-white border-0">
                <i class="fas fa-check-circle me-2"></i>
                <strong class="me-auto">¡Registro Exitoso!</strong>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="toast"></button>
            </div>
            <div class="toast-body">
                Cuenta creada correctamente. Redirigiendo al login...
            </div>
        </div>
    </div>

    <!-- Error Toast -->
    <div class="toast-container position-fixed top-0 end-0 p-3">
        <div id="errorToast" class="toast" role="alert">
            <div class="toast-header bg-danger text-white border-0">
                <i class="fas fa-exclamation-circle me-2"></i>
                <strong class="me-auto">Error</strong>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="toast"></button>
            </div>
            <div class="toast-body" id="errorMessage">
                Ha ocurrido un error. Intenta nuevamente.
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        // Password strength checker
        function checkPasswordStrength(password) {
            let strength = 0;
            let feedback = '';
            
            if (password.length >= 8) strength++;
            if (/[a-z]/.test(password)) strength++;
            if (/[A-Z]/.test(password)) strength++;
            if (/[0-9]/.test(password)) strength++;
            if (/[^A-Za-z0-9]/.test(password)) strength++;
            
            const strengthBar = document.getElementById('passwordStrength');
            const strengthText = document.getElementById('passwordStrengthText');
            
            if (strength < 3) {
                strengthBar.className = 'password-strength rounded password-weak';
                strengthBar.style.width = '33%';
                feedback = 'Contraseña débil - Añade mayúsculas y números';
            } else if (strength < 4) {
                strengthBar.className = 'password-strength rounded password-medium';
                strengthBar.style.width = '66%';
                feedback = 'Contraseña media - Añade símbolos para mayor seguridad';
            } else {
                strengthBar.className = 'password-strength rounded password-strong';
                strengthBar.style.width = '100%';
                feedback = 'Contraseña fuerte - ¡Excelente!';
            }
            
            strengthText.textContent = feedback;
            return strength >= 3;
        }

        // Toggle password visibility
        document.getElementById('togglePassword').addEventListener('click', function () {
            const password = document.getElementById('password');
            const confirmPassword = document.getElementById('confirmPassword');
            const icon = document.getElementById('toggleIcon');
            
            if (password.type === 'password') {
                password.type = 'text';
                confirmPassword.type = 'text';
                icon.classList.remove('fa-eye');
                icon.classList.add('fa-eye-slash');
            } else {
                password.type = 'password';
                confirmPassword.type = 'password';
                icon.classList.remove('fa-eye-slash');
                icon.classList.add('fa-eye');
            }
        });

        // Password validation
        document.getElementById('password').addEventListener('input', function() {
            const password = this.value;
            checkPasswordStrength(password);
            
            // Check confirm password if it has value
            const confirmPassword = document.getElementById('confirmPassword');
            if (confirmPassword.value) {
                validatePasswordMatch();
            }
        });

        // Confirm password validation
        document.getElementById('confirmPassword').addEventListener('input', validatePasswordMatch);

        function validatePasswordMatch() {
            const password = document.getElementById('password').value;
            const confirmPassword = document.getElementById('confirmPassword');
            
            if (password !== confirmPassword.value) {
                confirmPassword.setCustomValidity('Las contraseñas no coinciden');
                confirmPassword.classList.add('is-invalid');
                confirmPassword.classList.remove('is-valid');
            } else {
                confirmPassword.setCustomValidity('');
                confirmPassword.classList.remove('is-invalid');
                confirmPassword.classList.add('is-valid');
            }
        }

        // Email validation (simulate checking if email exists)
        document.getElementById('email').addEventListener('blur', function() {
            const email = this.value;
            const emailField = this;
            
            if (email && this.checkValidity()) {
                // Simulate API call to check email availability
                setTimeout(() => {
                    // For demo, assume email is available unless it's a demo account
                    if (email === 'cliente@cosmofood.cl' || email === 'admin@cosmofood.cl') {
                        emailField.setCustomValidity('Este correo ya está registrado');
                        emailField.classList.add('is-invalid');
                        emailField.classList.remove('is-valid');
                    } else {
                        emailField.setCustomValidity('');
                        emailField.classList.remove('is-invalid');
                        emailField.classList.add('is-valid');
                    }
                }, 500);
            }
        });

        // Phone number formatting
        document.getElementById('phone').addEventListener('input', function() {
            let value = this.value.replace(/\D/g, '');
            
            if (value.startsWith('56')) {
                value = '+' + value;
            } else if (value.startsWith('9') && value.length === 9) {
                value = '+56 ' + value;
            }
            
            // Format as +56 9 1234 5678
            if (value.startsWith('+56')) {
                value = value.replace(/(\+56)(\d{1})(\d{4})(\d{4})/, '$1 $2 $3 $4');
            }
            
            this.value = value;
        });

        // Accept terms function
        function acceptTerms() {
            document.getElementById('terms').checked = true;
        }

        // Form submission
        document.getElementById('registerForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const form = this;
            if (!form.checkValidity()) {
                e.stopPropagation();
                form.classList.add('was-validated');
                return;
            }

            // Additional validations
            const password = document.getElementById('password').value;
            if (!checkPasswordStrength(password)) {
                document.getElementById('errorMessage').textContent = 'La contraseña no cumple con los requisitos mínimos';
                const errorToast = new bootstrap.Toast(document.getElementById('errorToast'));
                errorToast.show();
                return;
            }

            const registerBtn = document.getElementById('registerBtn');
            
            // Show loading state
            registerBtn.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i>Creando cuenta...';
            registerBtn.disabled = true;

            // Simulate registration process
            setTimeout(() => {
                // Get form data
                const formData = {
                    firstName: document.getElementById('firstName').value,
                    lastName: document.getElementById('lastName').value,
                    email: document.getElementById('email').value,
                    phone: document.getElementById('phone').value,
                    address: document.getElementById('address').value,
                    newsletter: document.getElementById('newsletter').checked,
                    registrationDate: new Date().toISOString()
                };

                // Store user data (simulation)
                localStorage.setItem('cosmofood_registration', JSON.stringify(formData));
                
                // Success
                const successToast = new bootstrap.Toast(document.getElementById('successToast'));
                successToast.show();
                
                // Redirect to login after delay
                setTimeout(() => {
                    window.location.href = 'login.html?registered=true';
                }, 2000);
                
            }, 2000);
        });

        // Auto-fill demo data
        function fillDemoData() {
            document.getElementById('firstName').value = 'Juan';
            document.getElementById('lastName').value = 'Pérez';
            document.getElementById('email').value = 'juan.perez@example.com';
            document.getElementById('phone').value = '+56 9 8765 4321';
            document.getElementById('address').value = 'Los Robles 123, Valdivia';
            document.getElementById('password').value = 'MiPassword123';
            document.getElementById('confirmPassword').value = 'MiPassword123';
            
            // Trigger validations
            document.getElementById('password').dispatchEvent(new Event('input'));
            document.getElementById('confirmPassword').dispatchEvent(new Event('input'));
        }

        // Keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey && e.shiftKey && e.key === 'D') {
                fillDemoData();
            }
        });

        // Auto-focus on load
        window.addEventListener('load', function() {
            document.getElementById('firstName').focus();
        });

        console.log('%c📝 Registro Demo - Cosmofood', 'color: #ff6b35; font-size: 16px; font-weight: bold;');
        console.log('%cAtajos:', 'color: #2c3e50; font-weight: bold;');
        console.log('Ctrl + Shift + D: Llenar datos de prueba');
        console.log('Requisitos de contraseña: 8+ caracteres, mayúscula, número');
    </script>
</body>
</html>